# 📌 2025-05-24｜構造再編の記録：プロジェクトルートとPythonパッケージの分離

---

## 🧭 背景と問題

初期構成では、プロジェクト名として `remind_bot/` ディレクトリがそのまま Python パッケージを兼ねていた。

```
remind_bot/
├── xxx.py
```


### ❌ 問題点（開発が進むにつれ以下の問題が発生：）

- **ルート構造とPythonパッケージが重なっていて、importが曖昧・不自然になった**
- スクリプト実行時（例：`python -m remind_bot.bot`）の相対importが壊れやすくなった
- テストやコマンド実行のたびに「カレントディレクトリ」に依存する構造が不安定に
- **「構造を整えたいのに、物理構造が足を引っ張る」**というジレンマがあった

---

## 💡 構造転換の判断

> プロジェクトルート（=思想の入れ物）と、
> Pythonパッケージ（=構造の実体）を**明確に分離する構造**へ移行。

---

## 🛠 実行した構造変更

```
remindly/ ← ルートプロジェクト
├── feelbot/ ← Pythonパッケージ（実行・構造の本体）
│ ├── features/
│ ├── core/
│ ├── config/
│ └── main.py
├── requirements.txt
├── README.md
└── architecture/
```

- `remindly/` は **プロジェクトの思想・管理全体を表すルート**
- `feelbot/` は **実装されるアプリケーション構造の物理パッケージ**

---

## 📌 構造判断
> **ルート（思想・プロジェクト）とパッケージ（実体・構造）は分ける。**
> これは、**“設計思想の表現”と“構造の正確性”を両立するための設計作法**。

---

## 📚 設計思想における根拠

### 1. **Python公式推奨構成（PyPA, Packaging Guide）**

> 「プロジェクトのルートと import 可能なパッケージは分離すべき」
> — *Python Packaging Authority (PyPA), Recommended Project Layout*

- `src/` や `myapp/` をルート下に置く構成が標準
- importの安定性・テスト環境との整合性のため、**物理的境界の分離が必要**

### 2. **Clean Architecture / Hexagonal Architecture**

> 「外部インターフェースとアプリケーションのコアは分離されるべき」
> — *Alistair Cockburn, Hexagonal Architecture*

- プロジェクトルートが「ビルド・設定・CI/CD・ドキュメント等の管理空間」として機能
- Pythonパッケージはあくまで「実行のための構造」であるべき

### 3. **運用とスクリプト実行の安定性**

- `python -m feelbot.main` が安定動作
- pytestやmypyなどのツールが、**正確なインポートルートを持てる**

---

## 🌙 設計感覚

> **構造設計とは、“思想”と“実行構造”の分離を通じて、両者に正直であり続けること**

---

## 🔁 今後の運用方針

- ルートにはコード以外の要素（`README.md`, `architecture/`, `requirements.txt`, `tests/`, etc）を置く
- 実行対象のコード・構造体は常に `feelbot/` 内で完結させる
- **新プロジェクトも、最初からルートとパッケージを分けて始めるのが基本設計とする**

